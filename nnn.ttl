@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix pice: <http://example.com/pice#> .
@prefix dbo: <http://dbpedia.org/ontology/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix vcard: <http://www.w3.org/2006/vcard/ns#> .

# Contraintes pour pice:Event (anciennement dbo:Event)
pice:EventShape a sh:NodeShape ;
    sh:targetClass dbo:Event ;
    sh:property [
        sh:path dbo:startDate ;
        sh:datatype xsd:dateTime ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path dbo:endDate ;
        sh:datatype xsd:dateTime ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path dbo:location ;
        sh:class pice:Venue ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path pice:hasTheme ;  # Mis à jour pour correspondre à la nouvelle ontologie
        sh:datatype xsd:string ;
        sh:minLength 3 ;
        sh:maxLength 100 ;
    ] ;
    sh:property [
        sh:path pice:organizedBy ;  # Mis à jour pour correspondre à la nouvelle ontologie
        sh:class dbo:ServiceProvider ;  # Mis à jour pour correspondre à la nouvelle ontologie
        sh:message "organizedBy must be an instance of dbo:ServiceProvider." ;  # Message mis à jour
    ] .

# Assurez-vous que la startDate est antérieure à la endDate
pice:EventDateConsistencyShape a sh:NodeShape ;
    sh:targetClass dbo:Event ;
    sh:property [
        sh:path dbo:startDate ;
        sh:lessThan dbo:endDate ;
    ] .

# Contraintes pour pice:Venue
pice:VenueShape a sh:NodeShape ;
    sh:targetClass pice:Venue ;
    sh:property [
        sh:path pice:hasAddress ;  # Mis à jour pour correspondre à la nouvelle ontologie
        sh:datatype xsd:string ;
        sh:minLength 1 ;
        sh:message "Address must be a non-empty string." ;
    ] .

# Contraintes pour dbo:ServiceProvider
pice:ServiceProviderShape a sh:NodeShape ;  # Mis à jour pour correspondre à la nouvelle classe dbo:ServiceProvider
    sh:targetClass dbo:ServiceProvider ;
    sh:property [
        sh:path pice:hasProviderName ;  # Mis à jour pour correspondre à la nouvelle ontologie
        sh:datatype xsd:string ;
        sh:minLength 1 ;
        sh:message "Provider name must be a non-empty string." ;
    ] ;
    sh:property [
        sh:path pice:hasPrice ;  # Mis à jour pour correspondre à la nouvelle ontologie
        sh:datatype xsd:float ;
        sh:minInclusive 0 ;
        sh:message "Price must be a non-negative number." ;
    ] .

# Contraintes pour pice:WeatherForecast
pice:WeatherForecastShape a sh:NodeShape ;
    sh:targetClass pice:WeatherForecast ;
    sh:property [
        sh:path pice:hasTemperature ;
        sh:datatype xsd:float ;
    ] ;
    sh:property [
        sh:path pice:hasMinTemperature ;
        sh:datatype xsd:float ;
    ] ;
    sh:property [
        sh:path pice:hasMaxTemperature ;
        sh:datatype xsd:float ;
    ] ;
    sh:property [
        sh:path pice:hasHumidity ;
        sh:datatype xsd:float ;
    ] ;
    sh:property [
        sh:path pice:hasWeatherDescription ;
        sh:datatype xsd:string ;
    ] ;
    sh:property [
        sh:path pice:hasWeatherIcon ;
        sh:datatype xsd:string ;
    ] ;
    sh:property [
        sh:path pice:hasForecastTime ;
        sh:datatype xsd:dateTime ;
    ] ;
    sh:property [
        sh:path pice:hasMinTemperature ;
        sh:lessThanOrEquals pice:hasMaxTemperature ;
        sh:message "Minimum temperature must be less than or equal to maximum temperature." ;
    ] .

# Contraintes pour les catégories de lieux (Venue)
pice:VenueShape a sh:NodeShape ;
    sh:targetClass pice:Venue ;
    sh:property [
        sh:path pice:venueCategory ;
        sh:in ("Banquet Rooms" "Cinema" "Beach Club" "Convention Center" "Exhibition Center" "Hotel" "Theater" "Café/Pub" "Restaurant") ;
        sh:message "Venue category must be one of the predefined categories." ;
    ] .
